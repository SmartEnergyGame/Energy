<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="author" content="Daniel Santos">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="code_peak$.js"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://evanplaice.github.io/jquery-csv/src/jquery.csv.min.js"></script>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" />
  <title>Chart 1</title>
  <style media="screen">
  .tittle{
    font-family: 'Open Sans',serif;
  }
  .legend {
    font-size: : 12px;
    font-family: 'Open Sans',serif;
  }
  </style>
  <script type="text/javascript">
  function printTable(file) {
    var reader = new FileReader();
    reader.readAsText(file);
    reader.onload = function(event){
      var csv = event.target.result;
      var data = $.csv.toArrays(csv);
      var html = '';
      for(var row in data) {
        html += '<tr>\r\n';
        for(var item in data[row]) {
          html += '<td>' + data[row][item] + '</td>\r\n';
        }
        html += '</tr>\r\n';
      }
      $('#contents').html(html);
    };
    reader.onerror = function(){ alert('Unable to read ' + file.fileName); };
  }

    function selectFile(){
      var icsv = document.getElementById('csv').files[0];
      var  itype = "csv"
      if (!icsv.type.includes(itype)) {
        alert("Please select a csv file")
      }else{
        var mdata = 'Name File : '+ icsv.name;
        mdata +=  '<br> type: '+icsv.type;
        mdata +=  '<br> size: '+icsv.size;
        document.getElementById("result1").innerHTML = mdata;
        printTable(icsv)
      }
    }
  </script>
</head>
<body>
  <br>
  <center>
    <h2 class="tittle">Last month's energy usage per household</h2>
  </center>
  <div id="chart"></div>

  <center>
    <br>
    <h2>Upload the csv file that you want to visualize</h2>
    <fieldset>
      <legend> Choose the file </legend>
      <form class="" action="index.html" method="post">
        <input type="file" name="" value="" id="csv" onchange="selectFile()">
        <br>
        <div id="result1">

        </div>
      </form>
    </fieldset>

  </center>
<table id="contents" style="width:100%; height:400px;" border>

  <script>
    /* way one*/
    let peak = new Peak("../data1.csv")
    let myHouse = 15
    peak.plot("chart", myHouse)

    /*Way two*/
    /*let data  = [
      {name:"House1",y:600},
      {name:"House2",y:750},
      {name:"House3",y:800},
      {name:"House4",y:900},
      {name:"House5",y:1000},
      {name:"House6",y:900},
      {name:"House7",y:700},
      {name:"House8",y:900},
      {name:"House9",y:800},
      {name:"House10",y:1000},
      {name:"House11",y:700},
      {name:"House12",y:600}
    ]
    let peak = new Peak(data)
    let myHouse = 15
    peak.plot("chart", myHouse, false)*/
  </script>
</body>
</html>
